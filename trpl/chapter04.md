# 第04章 所有权

## 4.1 什么是所有权

所有程序在运行时，都必须管理它们使用计算机的方式：
- 带垃圾回收（GC)的语言，在运行时会不断寻找未使用地址；
- 不带垃圾回收的语言，在使用时需要显示的分配和释放内存；

rust 不同于上面两种方式，采用了一个所有权系统来管理，其中包含一组编译器在编译时检查的规则。由于是编译时检查，因此不会拖慢运行速度。

内存分配形式有栈（stack）和堆（heap），所有权是 rust 管理堆数据的手段。

### 所有权规则

- 每个值都有一个变量，这个变量是该值的拥有者；
- 每个值同时只能有一个所有制；
- 当所有者超过作用域（scope）时，该值会被删除，实际是调用 drop 方法；

### 变量与数据交互的方式
- 移动 Move
- 复制 Copy

## 4.2 引用与借用

### 引用规则
- 在任何给定的时刻，只能满足下列条件之一：
  - 一个可变应用
  - 任意数量的不可变应用
- 引用必须一直有效

## 4.3 切片

切片与引用一样，不持有变量所有权。

```rust
&a[..] // 返回完整字符串；
&a[1..5] // 左开右闭，索引从 0 开始；
&a[..9] // 返回前十个
```
